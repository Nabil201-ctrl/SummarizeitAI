<style>
    body {
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, #1f1c2c, #928dab);
        color: #fff;
        text-align: center;
        padding: 20px;
    }
    h2, h3 {
        background: rgba(255, 255, 255, 0.2);
        padding: 10px;
        border-radius: 10px;
        box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.2);
    }
    input, select, button {
        padding: 10px;
        border-radius: 5px;
        border: none;
        margin: 5px;
    }
    button {
        background: #ff6f61;
        color: white;
        font-weight: bold;
        cursor: pointer;
    }
    ul {
        list-style: none;
        padding: 0;
    }
    li {
        background: rgba(255, 255, 255, 0.2);
        margin: 5px 0;
        padding: 10px;
        border-radius: 5px;
    }
</style>

<%- include('../partials/header') %>

<h2>ğŸš€ Premium Dashboard</h2>
<p>Welcome, <%= user.name %>! Manage and customize your AI experience.</p>

<h3>ğŸ¤– AI Question Generator</h3>
<label for="numQuestions">Number of Questions:</label>
<input type="number" id="numQuestions" min="1" max="50" value="10">
<button onclick="setQuestionCount()">Save</button>

<script>
function setQuestionCount() {
    let count = document.getElementById("numQuestions").value;
    localStorage.setItem("premiumQuestionCount", count);
    alert("ğŸ¯ Question count saved!");
}
</script>

<h3>ğŸ“Š Question Analytics</h3>
<p>Total Questions Generated: <%= analytics.totalQuestions %></p>
<p>Total Study Sessions: <%= analytics.sessions %></p>

<h3>ğŸ“œ Question History</h3>
<ul>
    <% questionHistory.forEach(q => { %>
        <li>ğŸ“ <%= q.text %> - <%= q.numQuestions %> Questions (<%= q.date %>)</li>
    <% }) %>
</ul>

<h3>ğŸ¨ Customize Widget</h3>
<label for="theme">Widget Theme:</label>
<select id="theme" onchange="updateSettings()">
    <option value="light">ğŸŒ Light</option>
    <option value="dark">ğŸŒ™ Dark</option>
</select>

<h3>ğŸ›  AI Personalization</h3>
<label for="difficulty">AI Difficulty:</label>
<select id="difficulty" onchange="updateSettings()">
    <option value="easy">ğŸ˜Œ Easy</option>
    <option value="medium">ğŸ˜ Medium</option>
    <option value="hard">ğŸ”¥ Hard</option>
</select>

<script>
async function updateSettings() {
    let theme = document.getElementById("theme").value;
    let difficulty = document.getElementById("difficulty").value;
    
    await fetch("/api/premium/update-settings", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ widgetTheme: theme, aiSettings: { difficulty } })
    });

    alert("âœ… Settings updated!");
}
</script>

<h3>ğŸ“– AI-Generated Flashcards</h3>
<div id="flashcard-container"></div>
<script src="/js/flashcards.js"></script>

<h3>ğŸ† Study Leaderboard</h3>
<ul>
    <% leaderboard.forEach(user => { %>
        <li>ğŸ¥‡ <%= user.name %> - <%= user["questionHistory.length"] %> Sessions</li>
    <% }) %>
</ul>

<h3>ğŸ“š AI Study Recommendations</h3>
<ul id="study-recommendations"></ul>

<script>
async function fetchRecommendations() {
    const response = await fetch("/api/recommendations");
    const data = await response.json();
    document.getElementById("study-recommendations").innerHTML = data.recommendations.map(r => `<li>ğŸ“Œ ${r}</li>`).join("");
}
fetchRecommendations();
</script>

<h3>ğŸ”¥ Study Streak: <span id="streak-count">0</span> days</h3>
<h3>ğŸ… Level: <span id="user-level">1</span></h3>
<script src="/js/streaks.js"></script>

<%- include('../partials/footer') %>