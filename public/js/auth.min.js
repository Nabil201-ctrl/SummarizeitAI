// public/js/auth.min.js
// Lazy-loaded authentication animations for performance
document.addEventListener('DOMContentLoaded', () => {
    // Comment: Triggers fade-in on auto-login or login redirect, optimized for mobile
    const loginBtn = document.querySelector('#google-btn');
    if (loginBtn) {
      loginBtn.addEventListener('click', () => {
        loginBtn.querySelector('.spin').style.display = 'inline';
        // Comment: Animates spin on Google login, pop on success
        setTimeout(() => loginBtn.classList.add('pulse'), 500);
      });
    }
  
    // Auto-login check with fade-in and slide-up for root redirect
    if (window.location.pathname === '/' && document.referrer !== '/login') {
      // Comment: Redirects from root with fade-in, triggers slide-up on Dashboard
      fetch('/auth/check').then(response => response.json()).then(data => {
        if (data.authenticated && data.autoLogin) {
          document.body.classList.add('fade-in');
          setTimeout(() => window.location.href = '/dashboard', 500);
        }
      });
    }
  
    // Auto-login check on Dashboard for root redirect
    if (document.querySelector('.dashboard-grid') && window.location.pathname === '/dashboard') {
      // Comment: Triggers slide-up on auto-login, parallax background, optimized performance
      document.querySelector('.dashboard-grid').classList.add('slide-up');
      document.querySelector('.parallax-background').classList.add('parallax-animation');
    }
  });